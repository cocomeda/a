
<!DOCTYPE html>
<html>
<head>
  <title>くじ引き</title>
  <script src="https://static.line-scdn.net/liff/edge/liff.min.js"></script>
  <script>
    function initializeApp() {
      liff.init({ liffId: "1657196041-vDWabr0g" })
        .then(() => {
          liff.getIDToken()
            .then(idToken => {
              fetch('https://script.google.com/macros/s/AKfycbw_OMUOm7QNSYrJnLLXN-EI4i6qNgweqmZ4bJ22AwBFunYQubK2h3Enw5r-xdEMNEUEQw/exec', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams({
                  token: idToken
                })
              })
              .then(response => response.json())
              .then(data => {
                if (data.status === 'success') {
                  alert('抽選結果: ' + data.result);
                } else {
                  alert(data.message);
                }
              })
              .catch(error => console.error('Error:', error));
            })
            .catch(err => console.error('IDトークン取得エラー:', err));
        })
        .catch(err => console.error('LIFF初期化エラー:', err));
    }
  </script>
</head>
<body onload="initializeApp()">
  <h1>くじ引き</h1>
  <button onclick="initializeApp()">くじ引き</button>
</body>
</html>


